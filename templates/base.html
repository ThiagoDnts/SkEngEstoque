<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Sistema de Estoque{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

    <!-- CSS personalizado -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

<link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
<meta name="theme-color" content="#d90429">

    <style>
        /* Define o tamanho fixo da logo, só ela */
        .logo-img {
            height: 50px;
            width: auto;
            display: block;
        }

        /* Opcional: ajustar altura mínima da navbar */
        .navbar {
            min-height: 56px; /* altura padrão do Bootstrap */
        }
    </style>
</head>
<body class="bg-light">

    <!-- Navbar -->
   <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-3">
  <a class="navbar-brand d-flex align-items-center" href="{{ url_for('index') }}">
    <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Logo" class="logo-img">
  </a>

  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav me-auto">
      <li class="nav-item"><a class="nav-link" href="{{ url_for('entrada') }}"><i class="bi bi-box-arrow-in-down me-1"></i>Entrada</a></li>
      <li class="nav-item"><a class="nav-link" href="{{ url_for('saida') }}"><i class="bi bi-box-arrow-up me-1"></i>Saída</a></li>
      <li class="nav-item"><a class="nav-link" href="{{ url_for('historico') }}"><i class="bi bi-clock-history me-1"></i>Histórico</a></li>
    </ul>
    <ul class="navbar-nav">
      {% if session.get('user') %}
      <li class="nav-item d-flex align-items-center me-3">
        <i class="bi bi-person-circle me-1"></i> {{ session['user'] }}
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('logout') }}">
          <i class="bi bi-box-arrow-right"></i> Sair
        </a>
      </li>
      {% endif %}
    </ul>
  </div>
</nav>

    </nav>

    <div class="container mt-4">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-info shadow-sm">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('{{ url_for("static", filename="service-worker.js") }}')
        .then(registration => {
          console.log('Service Worker registrado com sucesso:', registration.scope);
        })
        .catch(error => {
          console.log('Falha ao registrar Service Worker:', error);
        });
    });
  }
</script>


</body>
</html>
